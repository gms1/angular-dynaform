#!/bin/bash
DN=$(dirname "$0")
BN=$(basename "$0")

if [ "${#}" == 0 ]; then
  echo "${BN}: usage error: usage: ${BN} grep-expression"
  exit 1
fi

SUBDIRS=( src systemjs )

pushd "${DN}/.." &>/dev/null
 for dir in *; do 
   [ -d "${dir}" ] || continue
   for subdir in "${SUBDIRS}"; do
     [ -d "${dir}/${subdir}" ] || continue
     find "${dir}/${subdir}" -name "*.ts" -exec grep -H "${@}" {} \;
   done
 done
popd &>/dev/null
