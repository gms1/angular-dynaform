#!/bin/bash

DN=$(dirname "$0")
BN=$(basename "$0")

PROJ_HOME=$(cd "${DN}/.."; pwd)
. "${DN}/sh/lib.sh"


#---------------------------------------------------------

echo 'Are you shure you want to publish to npm registry (yes|no)?'
read answer
if [ "${answer}" != "yes" ]; then
  exit 0
fi

pushd "${PROJ_HOME}/dist/@angular-dynaform/core" &>/dev/null || \
    die "directory '${PROJ_HOME}/dist/@angular-dynaform/core' not found"
  npm publish || \
      die "failed to publish 'core'"
popd &>/dev/null

pushd "${PROJ_HOME}/dist/@angular-dynaform/basic" &>/dev/null || \
    die "directory '${PROJ_HOME}/dist/@angular-dynaform/basic' not found"
  npm publish || \
      die "failed to publish 'basic'"
popd &>/dev/null

pushd "${PROJ_HOME}/dist/@angular-dynaform/material" &>/dev/null || \
    die "directory '${PROJ_HOME}/dist/@angular-dynaform/material' not found"
  npm publish || \
      die "failed to publish 'material'"
popd &>/dev/null

pushd "${PROJ_HOME}/dist/@angular-dynaform/nativescript" &>/dev/null || \
    die "directory '${PROJ_HOME}/dist/@angular-dynaform/nativescript' not found"
  npm publish --tag next || \
      die "failed to publish 'nativescript'"
popd &>/dev/null




