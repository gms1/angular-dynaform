#!/bin/bash

DN=$(dirname "$0")
BN=$(basename "$0")

PROJ_HOME=$(cd "${DN}/.."; pwd)
BUILD_SH_HOME="${PROJ_HOME}/build/sh"

. "${DN}/sh/lib.sh"

#---------------------------------------------------------

PKGJSON=(
dist/@angular-dynaform/core/package.json
dist/@angular-dynaform/basic/package.json
dist/@angular-dynaform/material/package.json
dist/@angular-dynaform/nativescript/package.json
)

#---------------------------------------------------------
if [ $# -ne 0 ]; then
  errormsg "${BN}: usage error: usage: ${BN}"
  exit 1
fi

pushd "${PROJ_HOME}" &>/dev/null        || die "failed to cwd '${PROJ_HOME}'"

  for file in "${PKGJSON[@]}"; do
    ${BUILD_SH_HOME}/tsrun publish-prepare.ts "${file}"
  done

popd &>/dev/null
